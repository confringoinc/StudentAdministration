{"version":3,"sources":["components/Login.js"],"names":["Login","useForm","register","errors","formState","handleSubmit","useState","statusRadio","state","setState","changeStatusHandler","e","target","name","value","history","useHistory","headers","className","type","id","checked","onChange","htmlFor","onSubmit","studentdata","data","Object","keys","map","key","encodeURIComponent","join","axios","post","API","then","response","success","push","pathname","token","alert","catch","required","minLength","maxLength","pattern","enrollmentNo","password","admindata","email","to"],"mappings":"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","file":"static/js/15.887cf0f8.chunk.js","sourcesContent":["import React, { useState } from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { useForm } from 'react-hook-form';\r\nimport { API } from '../utils/CommonFunctions';\r\n\r\nconst Login = () => {\r\n  const { register, formState: { errors }, handleSubmit } = useForm();\r\n  const [state, setState] = useState({ statusRadio: 'student' });\r\n\r\n  const changeStatusHandler = (e) => {\r\n    const { name, value } = e.target;\r\n    setState({\r\n      ...state,\r\n      [name]: value\r\n    });\r\n  }\r\n\r\n  const history = useHistory();\r\n\r\n  const headers = {\r\n    'Content-Type': 'application/x-www-form-urlencoded',\r\n  }\r\n\r\n  const onStudentSubmit = studentdata => {\r\n    const data = Object.keys(studentdata).map((key) =>\r\n      `${key}=${encodeURIComponent(studentdata[key])}`)\r\n      .join('&');\r\n\r\n    axios.post(API + '/student/login', data, { \"headers\": headers })\r\n      .then(function (response) {\r\n        if (response.data.success === true) {\r\n          history.push({\r\n            pathname: '/StudentAdministration/',\r\n            state: response.data.token\r\n          });\r\n        }\r\n        else {\r\n          alert(\"Incorrect enrollment number or password!\");\r\n        }\r\n      })\r\n      .catch(function () {\r\n        alert(\"Incorrect enrollment number or password!\");\r\n      });\r\n  }\r\n\r\n  const onAdminSubmit = admindata => {\r\n    const data = Object.keys(admindata).map((key) =>\r\n      `${key}=${encodeURIComponent(admindata[key])}`)\r\n      .join('&');\r\n\r\n    axios.post(API + '/admin/login', data, { \"headers\": headers })\r\n      .then(function (response) {\r\n        if (response.data.success === true) {\r\n          history.push({\r\n            pathname: '/StudentAdministration/admin',\r\n            state: response.data.token\r\n          });\r\n        }\r\n        else {\r\n          alert(\"Incorrect email or password!\");\r\n        }\r\n      })\r\n      .catch(function () {\r\n        alert(\"Incorrect email or password!\");\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"container col-md-5\">\r\n      <div className=\"mt-5 mb-5 card card-body p-md-5\">\r\n        <div>\r\n          <h1>\r\n            Student<span className=\"text-primary\">Center</span>\r\n          </h1>\r\n        </div>\r\n        <div className=\"row ms mt-5\">\r\n          <div className=\"form-check col-6\">\r\n            <input className=\"form-check-input\" type=\"radio\" name=\"statusRadio\" id=\"student\" value=\"student\" checked={state.statusRadio === \"student\"} onChange={changeStatusHandler} />\r\n            <label className=\"form-check-label\" htmlFor=\"student\">\r\n              Student\r\n            </label>\r\n          </div>\r\n          <div className=\"form-check col-6\">\r\n            <input className=\"form-check-input\" type=\"radio\" name=\"statusRadio\" id=\"admin\" value=\"admin\" checked={state.statusRadio === \"admin\"} onChange={changeStatusHandler} />\r\n            <label className=\"form-check-label\" htmlFor=\"admin\">\r\n              Admin\r\n            </label>\r\n          </div>\r\n        </div>\r\n        {state.statusRadio === 'student' ?\r\n          <form className=\"mt-5\" onSubmit={handleSubmit(onStudentSubmit)}>\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"enrollmentNo\" className=\"form-label\">Enrollment number</label>\r\n              <input type=\"text\" className=\"form-control\" id=\"enrollmentNo\" {...register(\"enrollmentNo\", { required: true, minLength: 12, maxLength: 12, pattern: /^[0-9]+$/i })} />\r\n              <div id=\"enrollmentNoError\" className=\"form-text text-danger\">{errors.enrollmentNo ? errors.enrollmentNo.type === 'required' ? \"* Enrollment no is required\" : \"* Enrollment no is not valid!\" : ''}</div>\r\n            </div>\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"password\" className=\"form-label\">Password</label>\r\n              <input type=\"password\" className=\"form-control\" id=\"password\" {...register(\"password\", { required: true, minLength: 6 })} />\r\n              <div id=\"passwordError\" className=\"form-text text-danger text-preline\">{errors.password ? errors.password.type === 'required' ? \"* Password is required\" : \"* Password is not valid!\" : ''}</div>\r\n            </div>\r\n            <div className=\"mt-5 d-grid gap-2\">\r\n              <button type=\"submit\" className=\"btn btn-primary\">Login</button>\r\n            </div>\r\n          </form>\r\n          :\r\n          <form className=\"mt-5\" onSubmit={handleSubmit(onAdminSubmit)}>\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"email\" className=\"form-label\">Email address</label>\r\n              <input type=\"email\" className=\"form-control\" id=\"email\" {...register(\"email\", { required: true, pattern: /^(([^<>()[\\].,;:\\s@\"]+(\\.[^<>()[\\].,;:\\s@\"]+)*)|(\".+\"))@(([^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\].,;:\\s@\"]{2,})$/i })} />\r\n              <div id=\"emailError\" className=\"form-text text-danger\">{errors.email ? errors.email.type === 'required' ? \"* Email is required\" : \"* Email is not valid!\" : ''}</div>\r\n            </div>\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"password\" className=\"form-label\">Password</label>\r\n              <input type=\"password\" className=\"form-control\" id=\"password\" {...register(\"password\", { required: true, minLength: 6 })} />\r\n              <div id=\"passwordError\" className=\"form-text text-danger text-preline\">{errors.password ? errors.password.type === 'required' ? \"* Password is required\" : \"* Password is not valid!\" : ''}</div>\r\n            </div>\r\n            <div className=\"mt-5 d-grid gap-2\">\r\n              <button type=\"submit\" className=\"btn btn-primary\">Login</button>\r\n            </div>\r\n          </form>}\r\n        <div className=\"mt-5\">\r\n          Not registered yet? <Link to='/StudentAdministration/register'>Register yourself</Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Login"],"sourceRoot":""}